# ğŸ‰ å†·åº“ DTU é¡¹ç›®ç»“æ„åˆ›å»ºå®Œæˆ

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

âœ… **é¡¹ç›®åç§°**: å†·åº“ DTU è¿œç¨‹å‡çº§æ¨¡å—  
âœ… **ç›®æ ‡å¹³å°**: Mac M4 å¼€å‘ç¯å¢ƒ  
âœ… **ç›®æ ‡èŠ¯ç‰‡**: Nuvoton NANO100SD3BN  
âœ… **è°ƒè¯•å™¨**: J-Link (å·²æ£€æµ‹åˆ° Serial: 000069706099)  
âœ… **å¼€å‘å·¥å…·**: Cursor/VS Code + ARM å·¥å…·é“¾

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
hy-cool-dtu/
â”œâ”€â”€ ğŸ“ app/                        # åº”ç”¨ç¨‹åºæºç 
â”œâ”€â”€ ğŸ“ Nano/                       # NANO100èŠ¯ç‰‡ç›¸å…³æ–‡ä»¶
â”œâ”€â”€ ğŸ“ tools/                      # å¼€å‘å·¥å…·é›†
â”‚   â”œâ”€â”€ ğŸ“ scripts/                # æ„å»ºå’Œè°ƒè¯•è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ ğŸ”§ build.sh            # æ„å»ºè„šæœ¬ (CMake/PlatformIO)
â”‚   â”‚   â”œâ”€â”€ ğŸ”¥ flash.sh            # å›ºä»¶çƒ§å†™è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ ğŸ› debug.sh            # è°ƒè¯•è„šæœ¬ (J-Link/OpenOCD)
â”‚   â”‚   â”œâ”€â”€ ğŸ” detect_device.sh    # ç¡¬ä»¶æ£€æµ‹è„šæœ¬
â”‚   â”‚   â””â”€â”€ ğŸ§ª test_project.sh     # é¡¹ç›®å®Œæ•´æ€§æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ debug/                  # è°ƒè¯•é…ç½®
â”‚   â”‚   â””â”€â”€ âš™ï¸ openocd_nano100.cfg # OpenOCDé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ test/                   # æµ‹è¯•å·¥å…·
â”‚       â””â”€â”€ ğŸ test_ota.py         # OTAåŠŸèƒ½æµ‹è¯•å·¥å…·
â”œâ”€â”€ ğŸ“ .vscode/                    # VS Code/Cursoré…ç½®
â”‚   â”œâ”€â”€ âš™ï¸ settings.json           # ç¼–è¾‘å™¨è®¾ç½®
â”‚   â”œâ”€â”€ ğŸš€ launch.json             # è°ƒè¯•é…ç½®
â”‚   â”œâ”€â”€ ğŸ“‹ tasks.json              # ä»»åŠ¡é…ç½®
â”‚   â””â”€â”€ ğŸ§© extensions.json        # æ‰©å±•æ¨è
â”œâ”€â”€ ğŸ“ cmake/                      # CMakeé…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ docs/                       # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ ğŸ“ hardware/                   # ç¡¬ä»¶ç›¸å…³æ–‡ä»¶
â”œâ”€â”€ ğŸ”¨ CMakeLists.txt              # CMakeä¸»é…ç½®
â”œâ”€â”€ âš¡ platformio.ini              # PlatformIOé…ç½®
â”œâ”€â”€ ğŸ¨ .clang-format               # ä»£ç æ ¼å¼åŒ–é…ç½®
â”œâ”€â”€ ğŸ“š README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ ğŸ“– OTA_DEV.md                  # OTAå¼€å‘æ‰‹å†Œ (18KB)
â””â”€â”€ ğŸš€ quick_setup.sh              # å¿«é€Ÿå®‰è£…è„šæœ¬ (9.5KB)
```

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

- [x] ARM äº¤å‰ç¼–è¯‘å·¥å…·é“¾é…ç½®
- [x] CMake æ„å»ºç³»ç»Ÿé…ç½®
- [x] PlatformIO æ”¯æŒé…ç½®
- [x] Cursor/VS Code å¼€å‘ç¯å¢ƒé…ç½®
- [x] ä»£ç æ ¼å¼åŒ–é…ç½® (clang-format)
- [x] è°ƒè¯•å™¨é…ç½® (J-Link + OpenOCD)

### ğŸ“œ å¼€å‘è„šæœ¬

- [x] **build.sh** - æ”¯æŒ CMake å’Œ PlatformIO åŒæ„å»ºç³»ç»Ÿ
- [x] **flash.sh** - è‡ªåŠ¨æ£€æµ‹å¹¶çƒ§å†™å›ºä»¶
- [x] **debug.sh** - å®Œæ•´è°ƒè¯•æ”¯æŒ(J-Link/OpenOCD/RTT/å†…å­˜è°ƒè¯•)
- [x] **detect_device.sh** - ç¡¬ä»¶è¿æ¥æ£€æµ‹
- [x] **test_project.sh** - é¡¹ç›®å®Œæ•´æ€§éªŒè¯

### ğŸ§ª æµ‹è¯•å·¥å…·

- [x] **test_ota.py** - å®Œæ•´ OTA æµ‹è¯•å¥—ä»¶
  - OTA æœåŠ¡å™¨æ¨¡æ‹Ÿ
  - å›ºä»¶ç”Ÿæˆå’Œç®¡ç†
  - è®¾å¤‡å‡çº§æ¨¡æ‹Ÿ
  - å®Œæ•´å‡çº§æµç¨‹æµ‹è¯•

### ğŸ“‹ VS Code/Cursor é…ç½®

- [x] **æ™ºèƒ½ä»£ç è¡¥å…¨** - ARM Cortex-M é…ç½®
- [x] **è°ƒè¯•é…ç½®** - 6 ç§è°ƒè¯•æ¨¡å¼
- [x] **ä»»åŠ¡é…ç½®** - 15 ä¸ªé¢„å®šä¹‰ä»»åŠ¡
- [x] **æ‰©å±•æ¨è** - å®Œæ•´å·¥å…·é“¾æ”¯æŒ

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### ğŸš€ å¿«é€Ÿå¼€å§‹

1. **éªŒè¯ç¯å¢ƒ**:

   ```bash
   ./tools/scripts/test_project.sh
   ```

2. **æ£€æµ‹ç¡¬ä»¶**:

   ```bash
   ./tools/scripts/detect_device.sh
   ```

3. **æ„å»ºé¡¹ç›®**:

   ```bash
   ./tools/scripts/build.sh          # é»˜è®¤Debug + CMake
   ./tools/scripts/build.sh Release  # Releaseæ„å»º
   ```

4. **çƒ§å†™å›ºä»¶**:

   ```bash
   ./tools/scripts/flash.sh build/hy-cool-dtu.bin
   ```

5. **å¯åŠ¨è°ƒè¯•**:
   ```bash
   ./tools/scripts/debug.sh jlink    # J-Linkè°ƒè¯•
   ./tools/scripts/debug.sh rtt      # RTTå®æ—¶æ—¥å¿—
   ```

### ğŸ§ª OTA æµ‹è¯•

1. **è¿è¡Œæµ‹è¯•å¥—ä»¶**:

   ```bash
   python3 tools/test/test_ota.py test
   ```

2. **å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨**:

   ```bash
   python3 tools/test/test_ota.py server --port 8080
   ```

3. **ç”Ÿæˆæµ‹è¯•å›ºä»¶**:
   ```bash
   python3 tools/test/test_ota.py generate --version 1.2.0 --size 128
   ```

### ğŸ’» Cursor å¼€å‘

1. **æ‰“å¼€é¡¹ç›®**: ä½¿ç”¨ Cursor æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹
2. **å®‰è£…æ‰©å±•**: è‡ªåŠ¨æç¤ºå®‰è£…æ¨èæ‰©å±•
3. **é€‰æ‹©ä»»åŠ¡**: `Cmd+Shift+P` â†’ "Tasks: Run Task"
4. **å¼€å§‹è°ƒè¯•**: `F5` æˆ–ä½¿ç”¨è°ƒè¯•é¢æ¿

## ğŸ›ï¸ å¯ç”¨çš„è°ƒè¯•é…ç½®

| é…ç½®åç§°                | ç”¨é€”         | è°ƒè¯•å™¨     |
| ----------------------- | ------------ | ---------- |
| Debug (J-Link)          | æ ‡å‡†è°ƒè¯•     | J-Link     |
| Debug (OpenOCD)         | OpenOCD è°ƒè¯• | OpenOCD    |
| Debug (PlatformIO)      | PIO è°ƒè¯•     | PlatformIO |
| Attach to J-Link        | é™„åŠ è°ƒè¯•     | J-Link     |
| Debug OTA Module        | OTA ä¸“ç”¨è°ƒè¯• | J-Link     |
| Debug Flash Programming | çƒ§å†™è°ƒè¯•     | J-Link     |

## ğŸ“‹ å¯ç”¨çš„ä»»åŠ¡

### ğŸ”¨ æ„å»ºä»»åŠ¡

- Build Project (CMake) - é»˜è®¤æ„å»º
- Build Project (PlatformIO) - PIO æ„å»º
- Build Release (CMake) - å‘å¸ƒæ„å»º
- Clean Build - æ¸…ç†æ„å»º

### ğŸ”§ è°ƒè¯•ä»»åŠ¡

- Debug with J-Link - J-Link è°ƒè¯•
- Debug with OpenOCD - OpenOCD è°ƒè¯•
- Start RTT Debug - RTT å®æ—¶è¾“å‡º
- Memory Debug - å†…å­˜è°ƒè¯•

### ğŸ§ª æµ‹è¯•ä»»åŠ¡

- Test OTA Module - OTA åŠŸèƒ½æµ‹è¯•
- Start OTA Test Server - OTA æµ‹è¯•æœåŠ¡å™¨
- Generate Test Firmware - ç”Ÿæˆæµ‹è¯•å›ºä»¶
- Detect Hardware - ç¡¬ä»¶æ£€æµ‹

### ğŸ¨ ä»£ç è´¨é‡

- Format Code - ä»£ç æ ¼å¼åŒ–
- Check Code Style - ä»£ç é£æ ¼æ£€æŸ¥

## ğŸ”§ ç¡¬ä»¶è¿æ¥çŠ¶æ€

âœ… **J-Link è°ƒè¯•å™¨**: å·²è¿æ¥ (Serial: 000069706099)  
âœ… **ARM å·¥å…·é“¾**: å·²å®‰è£… (GCC 15.1.0)  
âœ… **ç›®æ ‡èŠ¯ç‰‡**: NANO100SD3BN  
âš ï¸ **ä¸²å£è¿æ¥**: å¾…æ£€æµ‹

## ğŸ“š æ–‡æ¡£èµ„æº

- ğŸ“– **OTA_DEV.md** - å®Œæ•´ OTA å¼€å‘æ‰‹å†Œ (18KB)
- ğŸ“š **README.md** - é¡¹ç›®å¿«é€ŸæŒ‡å— (4.6KB)
- ğŸ”§ **quick_setup.sh** - è‡ªåŠ¨ç¯å¢ƒé…ç½® (9.5KB)

## ğŸ‰ ä¸‹ä¸€æ­¥

ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. âœ… **å¼€å§‹ç¼–ç ** - æ‰€æœ‰å·¥å…·å·²å°±ç»ª
2. ğŸ”§ **è°ƒè¯•ç¨‹åº** - å¤šç§è°ƒè¯•é€‰é¡¹å¯ç”¨
3. ğŸ§ª **æµ‹è¯• OTA** - å®Œæ•´æµ‹è¯•ç¯å¢ƒå·²é…ç½®
4. ğŸ“– **æŸ¥çœ‹æ–‡æ¡£** - è¯¦ç»†å¼€å‘æŒ‡å—å·²æä¾›

---

**ğŸŠ æ­å–œï¼å†·åº“ DTU é¡¹ç›®å¼€å‘ç¯å¢ƒå·²å®Œå…¨é…ç½®å®Œæˆï¼**

ç°åœ¨æ‚¨æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ Mac M4 åµŒå…¥å¼å¼€å‘ç¯å¢ƒï¼Œæ”¯æŒï¼š

- ARM Cortex-M å¼€å‘
- åŒæ„å»ºç³»ç»Ÿ (CMake + PlatformIO)
- å¤šç§è°ƒè¯•é€‰é¡¹ (J-Link + OpenOCD)
- å®Œæ•´ OTA æµ‹è¯•å¥—ä»¶
- ç°ä»£åŒ– IDE é…ç½® (Cursor/VS Code)

ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼ğŸš€
